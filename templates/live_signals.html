{% extends "base.html" %}
{% block content %}

<h2>ðŸ¤– Live Bot Signals</h2>
<p>This shows the latest signals generated by your bot worker.</p>

<form action="{{ url_for('refresh_live_signals') }}" method="get" style="margin-bottom: 1rem;">
  <button type="submit">ðŸ”„ Run new scan now</button>
</form>

{% if error %}
  <div class="card" style="background:#ffe6e6;">
    <strong>Error:</strong> {{ error }}
  </div>
{% endif %}

{% if signals and signals|length > 0 %}
  <div class="card">
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th style="text-align:left; padding: 6px;">Symbol</th>
          <th style="text-align:left; padding: 6px;">Name</th>
          <th style="text-align:left; padding: 6px;">Plus500</th>
          <th style="text-align:left; padding: 6px;">Signal</th>
          <th style="text-align:left; padding: 6px;">Price</th>
          <th style="text-align:left; padding: 6px;">Time</th>
        </tr>
      </thead>
      <tbody>
        {% for s in signals %}
          <tr>
            <td style="padding: 6px;">{{ s.symbol }}</td>
            <td style="padding: 6px;">{{ s.label }}</td>
            <td style="padding: 6px;">{{ s.plus500_name }}</td>
            <td style="padding: 6px; font-weight: bold;">
              {% if s.signal == "BUY" %}
                ðŸŸ¢ BUY
              {% elif s.signal == "SELL" %}
                ðŸ”´ SELL
              {% else %}
                âšª None
              {% endif %}
            </td>
            <td style="padding: 6px;">{{ s.price }}</td>
            <td style="padding: 6px;">{{ s.time }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p>No signals found yet. Give the bot a few minutes to run.</p>
{% endif %}

{% endblock %}
